{% extends 'main/layout.html' %}
{% load static %}

{% block content %}
<h2 class="Auth_title">Фотографии профиля {{ username }}</h2>

<div class="btn_photo">
    <a href="{% url 'profile' username %}" class="btn-news">Профиль</a>
    <a href="{% url 'profile-photo' username %}" class="btn-news">Фотографии</a>
</div>
<div class="btn_photo">
    {% if is_owner %}
        <a href="{% url 'profile_add_media' %}" class="btn-news">Добавить фотографию</a>
    {% endif %}
</div>

<div class="news-detail-container">
    <section class="news-detail-content">
        {% for media in photo %}
            <div class="media-item">
                <img src="{{ media.file.url }}" alt="photo" class="news-inner-image clickable" data-fullscreen-src="{{ media.file.url }}">
                <a href="{% url 'profile-photo' username %}" class="btn-news">Удалить фотографию</a>
            </div>
        {% empty %}
            <p>Пользователь не загрузил ни одной фотографии</p>
        {% endfor %}
    </section>

    <!-- Модальное окно -->
    <div id="modal_photo" class="modal_photo">
        <span class="close">&times;</span>
        <img class="modal_photo-content" id="modal_photo-img">
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var modal = document.getElementById('modal_photo');
        var modalImg = document.getElementById('modal_photo-img');
        var closeBtn = document.getElementsByClassName('close')[0];

        document.querySelectorAll('.clickable').forEach(function(img) {
            img.addEventListener('click', function() {
                var fullScreenSrc = img.getAttribute('data-fullscreen-src');
                modal.style.display = 'block';
                modalImg.src = fullScreenSrc;
            });
        });

        closeBtn.onclick = function() {
            modal.style.display = 'none';
        }

        // Закрытие модального окна при клике вне его
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    });

</script>

{% endblock %}
